{"ast":null,"code":"import _slicedToArray from\"/Users/ruchikaashokbharati/Desktop/Contact_Web_App_Local/backend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{register,clearErrors}from\"../../actions/userActions\";import'../../App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Register=function Register(_ref){var history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),avatar=_useState8[0],setAvatar=_useState8[1];var _useState9=useState(\"/images/default_avatar.jpg\"),_useState10=_slicedToArray(_useState9,2),avatarPreview=_useState10[0],setAvatarPreview=_useState10[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),isAuthenticated=_useSelector.isAuthenticated,loading=_useSelector.loading,error=_useSelector.error;if(isAuthenticated){alert.success(\"user registered successfully\");history.push(\"/\");}useEffect(function(){if(error){alert.error(error);dispatch(clearErrors());}},[dispatch,alert,isAuthenticated,error,history]);var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();console.log(\"name\",name,\"emai\",email,\"password\",password,\"avatar\",avatar);formData.append(\"avatar\",avatarPreview);formData.append(\"name\",name);formData.append(\"email\",email);formData.append(\"password\",password);dispatch(register(formData));};var onChange=function onChange(e){if(e.target.name===\"avatar\"){var reader=new FileReader();console.log(\"image\",e.target.files[0]);reader.readAsDataURL(e.target.files[0]);reader.onload=function(){if(reader.readyState==2){setAvatarPreview(reader.result);setAvatar(reader.result);}};}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"shadow-lg\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",name:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password_field\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password_field\",className:\"form-control\",name:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar_upload\",children:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"avatar mr-3 item-rtl\",children:/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,className:\"rounded-circle\",alt:\"Avatar Preview\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",accept:\"images/*\",onChange:onChange}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Choose Avatar\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{id:\"register_button\",type:\"submit\",className:\"btn btn-block py-3\",disabled:loading?true:false,children:\"REGISTER\"})]})})})});};export default Register;","map":{"version":3,"names":["React","useEffect","useState","useAlert","useDispatch","useSelector","register","clearErrors","Register","history","name","setName","email","setEmail","password","setPassword","avatar","setAvatar","avatarPreview","setAvatarPreview","alert","dispatch","state","auth","isAuthenticated","loading","error","success","push","submitHandler","e","preventDefault","formData","FormData","console","log","append","onChange","target","reader","FileReader","files","readAsDataURL","onload","readyState","result","value"],"sources":["/Users/ruchikaashokbharati/Desktop/Contact_Web_App_Local/backend/client/src/components/authentication/register.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { register, clearErrors } from \"../../actions/userActions\";\nimport '../../App.css'\nconst Register = ({ history }) => {\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [avatar, setAvatar] = useState(\"\");\n  const [avatarPreview, setAvatarPreview] = useState(\"/images/default_avatar.jpg\");\n  const alert = useAlert();\n  const dispatch = useDispatch();\n  const { isAuthenticated, loading, error } = useSelector(state => state.auth);\n  if (isAuthenticated) {\n    alert.success(\"user registered successfully\");\n    history.push(\"/\");\n  }\n  useEffect(() => {\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n  }, [dispatch, alert, isAuthenticated, error, history])\n  const submitHandler = (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    console.log(\"name\", name, \"emai\", email, \"password\", password, \"avatar\", avatar)\n    formData.append(\"avatar\", avatarPreview);\n    formData.append(\"name\", name);\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n    dispatch(register(formData))\n  }\n  const onChange = e => {\n    if (e.target.name === \"avatar\") {\n      const reader = new FileReader();\n      console.log(\"image\", e.target.files[0])\n      reader.readAsDataURL(e.target.files[0]);\n      reader.onload = () => {\n        if (reader.readyState == 2) {\n          setAvatarPreview(reader.result);\n          setAvatar(reader.result);\n        }\n      }\n    }\n  }\n  return (\n    <>\n      <div className=\"row wrapper\">\n        <div className=\"col-10 col-lg-5\">\n          <form onSubmit={submitHandler} className=\"shadow-lg\" encType='multipart/form-data'>\n            <h1 className=\"mb-3\">Register</h1>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email_field\">Name</label>\n              <input type=\"name\" id=\"name_field\" className=\"form-control\" name=\"name\" value={name} onChange={(e) => setName(e.target.value)} />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email_field\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email_field\"\n                className=\"form-control\"\n                name=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"password_field\">Password</label>\n              <input\n                type=\"password\"\n                id=\"password_field\"\n                className=\"form-control\"\n                name=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n\n            <div className='form-group'>\n              <label htmlFor='avatar_upload'>Avatar</label>\n              <div className='d-flex align-items-center'>\n                <div>\n                  <figure className='avatar mr-3 item-rtl'>\n                    <img\n                      src={avatarPreview}\n                      className='rounded-circle'\n                      alt='Avatar Preview'\n                    />\n                  </figure>\n                </div>\n                <div className='custom-file'>\n                  <input\n                    type='file'\n                    name='avatar'\n                    className='custom-file-input'\n                    id='customFile'\n                    accept=\"images/*\"\n                    onChange={onChange}\n                  />\n                  <label className='custom-file-label' htmlFor='customFile'>\n                    Choose Avatar\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            <button\n              id=\"register_button\"\n              type=\"submit\"\n              className=\"btn btn-block py-3\"\n              disabled={loading ? true : false}\n            >\n              REGISTER\n            </button>\n          </form>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Register"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}